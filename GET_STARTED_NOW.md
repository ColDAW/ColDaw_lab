# ç«‹å³å¼€å§‹ - Railway éƒ¨ç½²æ­¥éª¤\n\n## ğŸ“ ä½ ç°åœ¨çš„ä½ç½®\n- é¡¹ç›®å·²åœ¨ Railway ä¸Šéƒ¨ç½²\n- é‚®ä»¶æœåŠ¡ä» Mailgun è¿ç§»åˆ° Zoho\n- ä»£ç å·²å‡†å¤‡å¥½ï¼Œéœ€è¦é…ç½®ç¯å¢ƒå˜é‡\n\n## ğŸ¯ æ¥ä¸‹æ¥è¦åšçš„äº‹ (15 åˆ†é’Ÿ)\n\n### â° ç¬¬1æ­¥: è·å– Zoho å‡­è¯ (5åˆ†é’Ÿ)\n\n#### 1.1 è·å– Account ID\n```\n1. æ‰“å¼€: https://mail.zoho.com\n2. ç™»å½•ä½ çš„ Zoho è´¦æˆ·\n3. ç‚¹å‡»: è®¾ç½® (Settings) â†’ è´¦æˆ·ä¿¡æ¯ (Account Info)\n4. å¤åˆ¶: Account ID (ä¾‹å¦‚: 1234567890123456789)\n5. ä¿å­˜åˆ°è®°äº‹æœ¬\n```\n\n#### 1.2 è·å– OAuth Token\n```\n1. æ‰“å¼€: https://api-console.zoho.com/\n2. ç™»å½•ä½ çš„ Zoho è´¦æˆ·\n3. ç‚¹å‡»: Self Client â†’ åˆ›å»º\n4. å¤åˆ¶: Refresh Token\n5. è¿™å°±æ˜¯ä½ çš„ ZOHO_API_KEY\n6. ä¿å­˜åˆ°è®°äº‹æœ¬\n```\n\n#### 1.3 ç¡®è®¤å‘é€é‚®ç®±\n```\n1. æ‰“å¼€: https://mail.zoho.com/settings\n2. æ‰¾åˆ°ä½ çš„é‚®ç®±åœ°å€ (ä¾‹å¦‚: noreply@yourdomain.com)\n3. ç¡®è®¤å·²éªŒè¯ (æ˜¾ç¤º âœ“)\n4. å¦‚æœæœªéªŒè¯ï¼Œç‚¹å‡»éªŒè¯é“¾æ¥\n```\n\n### â° ç¬¬2æ­¥: åœ¨ Railway ä¸­é…ç½® (5åˆ†é’Ÿ)\n\n#### 2.1 æ‰“å¼€ Railway Dashboard\n```\nè®¿é—®: https://railway.app/dashboard\nç™»å½•\n```\n\n#### 2.2 æ‰¾åˆ°ä½ çš„é¡¹ç›®å’ŒæœåŠ¡\n```\n1. ç‚¹å‡»ä½ çš„é¡¹ç›®åç§°\n2. åœ¨å·¦ä¾§æ‰¾åˆ° \"server\" æœåŠ¡\n3. ç‚¹å‡» \"server\" æœåŠ¡\n```\n\n#### 2.3 æ·»åŠ ç¯å¢ƒå˜é‡\n```\n1. ç‚¹å‡» \"Variables\" æ ‡ç­¾\n2. ç‚¹å‡» \"+ Add Variable\" æŒ‰é’®\n```\n\n**æ·»åŠ ä¸‰ä¸ªå˜é‡:**\n\n| å˜é‡å | å€¼ | è¯´æ˜ |\n|------|-----|------|\n| `ZOHO_API_KEY` | ä½ çš„ Refresh Token | OAuth Token |\n| `ZOHO_ACCOUNT_ID` | ä½ çš„ Account ID | è´¦æˆ· ID |\n| `ZOHO_FROM_EMAIL` | noreply@yourdomain.com | å‘é€é‚®ç®± |\n\n**ç¤ºä¾‹:**\n```\nZOHO_API_KEY = 1000.a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6\nZOHO_ACCOUNT_ID = 1234567890123456789\nZOHO_FROM_EMAIL = noreply@coldaw.app\n```\n\n#### 2.4 (å¯é€‰) æ ‡è®°ä¸º Secret\n```\nä¸ºäº†å®‰å…¨ï¼Œå»ºè®®å°†ä»¥ä¸‹å˜é‡æ ‡è®°ä¸º Secret:\nâ˜‘ï¸ ZOHO_API_KEY\nâ˜‘ï¸ ZOHO_ACCOUNT_ID\n\nè¿™æ ·å®ƒä»¬ä¸ä¼šåœ¨æ—¥å¿—ä¸­æ˜¾ç¤º\n```\n\n### â° ç¬¬3æ­¥: éƒ¨ç½²æ›´æ–°çš„ä»£ç  (3åˆ†é’Ÿ)\n\n#### 3.1 æ¨é€ä»£ç åˆ° Git\n```bash\ncd /Users/yifan/Documents/WebD/ColDaw_lab\n\ngit status  # æŸ¥çœ‹æœ‰ä»€ä¹ˆæ”¹åŠ¨\n\ngit add .\n\ngit commit -m \"feat: migrate from Mailgun to Zoho Mail API for Railway\"\n\ngit push origin main\n```\n\n#### 3.2 ç­‰å¾…è‡ªåŠ¨éƒ¨ç½²\n```\nRailway ä¼šè‡ªåŠ¨æ£€æµ‹åˆ° push\nåœ¨ Dashboard ä¸­æŸ¥çœ‹éƒ¨ç½²è¿›åº¦\nç­‰å¾…çŠ¶æ€å˜ä¸º âœ… Success (1-3 åˆ†é’Ÿ)\n```\n\n### â° ç¬¬4æ­¥: éªŒè¯éƒ¨ç½² (2åˆ†é’Ÿ)\n\n#### 4.1 æ£€æŸ¥æ—¥å¿—\n```bash\n# å®‰è£… Railway CLI (å¦‚æœè¿˜æ²¡æœ‰)\nnpm install -g @railway/cli\n\n# ç™»å½•\nrailway login\n\n# é“¾æ¥é¡¹ç›®\ncd /Users/yifan/Documents/WebD/ColDaw_lab\nrailway link\n\n# æŸ¥çœ‹å®æ—¶æ—¥å¿—\nrailway logs --follow\n\n# æŸ¥æ‰¾è¿™æ¡æ¶ˆæ¯ (è¯´æ˜æˆåŠŸ):\n# âœ… Email service initialized with Zoho Mail API\n```\n\n#### 4.2 æµ‹è¯•é‚®ä»¶å‘é€\n```bash\n# è·å–ä½ çš„ Railway URL\nrailway status\n# æˆ–åœ¨ Railway Dashboard ä¸­æŸ¥çœ‹\n\n# æµ‹è¯•å‘é€éªŒè¯é‚®ä»¶\ncurl -X POST https://your-railway-url/api/auth/send-verification \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"email\":\"your_email@gmail.com\"}'\n\n# åº”è¯¥è¿”å›:\n# {\"message\":\"Verification code sent successfully\"}\n\n# æ£€æŸ¥ä½ çš„é‚®ç®± (åŒ…æ‹¬åƒåœ¾é‚®ä»¶)\n# åº”è¯¥æ”¶åˆ° ColDAW éªŒè¯é‚®ä»¶\n```\n\n## âœ… å®Œæˆï¼\n\nå½“ä½ æˆåŠŸå®Œæˆä»¥ä¸Šæ­¥éª¤ï¼Œä½ çš„ Zoho Mail API å°±åœ¨ Railway ä¸Šæ­£å¸¸å·¥ä½œäº†ã€‚\n\n## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ\n\n### é—®é¢˜ 1: æ—¥å¿—æ˜¾ç¤º SMTP è€Œé Zoho\n```\nåŸå› : ç¯å¢ƒå˜é‡æœªæ­£ç¡®è®¾ç½®\n\nè§£å†³:\n1. æ£€æŸ¥ Railway Dashboard ä¸­çš„å˜é‡æ˜¯å¦æ­£ç¡®\n2. ç¡®è®¤æ‹¼å†™å®Œå…¨ä¸€è‡´ (åŒ…æ‹¬å¤§å°å†™)\n3. åœ¨ Railway Dashboard ç‚¹å‡» \"Redeploy\" é‡æ–°éƒ¨ç½²\n```\n\n### é—®é¢˜ 2: é‚®ä»¶æœªæ”¶åˆ°\n```\nåŸå› : å¯èƒ½æ˜¯ä»¥ä¸‹å‡ ä¸ªåŸå› \n\nè§£å†³æ­¥éª¤:\n1. æ£€æŸ¥æ—¥å¿—ä¸­æ˜¯å¦æœ‰é”™è¯¯ (railway logs --follow)\n2. ç¡®è®¤ ZOHO_FROM_EMAIL å·²åœ¨ Zoho ä¸­éªŒè¯\n3. æ£€æŸ¥åƒåœ¾é‚®ä»¶æ–‡ä»¶å¤¹\n4. å°è¯•ä¸åŒçš„é‚®ç®±åœ°å€æµ‹è¯•\n```\n\n### é—®é¢˜ 3: 401/403 é”™è¯¯\n```\nåŸå› : OAuth Token é—®é¢˜\n\nè§£å†³:\n1. é‡æ–°ä» https://api-console.zoho.com/ ç”Ÿæˆ Token\n2. æ›´æ–° Railway Dashboard ä¸­çš„ ZOHO_API_KEY\n3. é‡æ–°éƒ¨ç½²\n```\n\n## ğŸ“ æ£€æŸ¥æ¸…å•\n\n- [ ] ä» Zoho è·å–äº† Account ID\n- [ ] ä» Zoho ç”Ÿæˆäº† OAuth Token\n- [ ] ç¡®è®¤å‘é€é‚®ç®±åœ¨ Zoho ä¸­å·²éªŒè¯\n- [ ] åœ¨ Railway Dashboard ä¸­æ·»åŠ äº†ä¸‰ä¸ªç¯å¢ƒå˜é‡\n- [ ] æ¨é€ä»£ç åˆ° Git\n- [ ] ç­‰å¾… Railway è‡ªåŠ¨éƒ¨ç½²å®Œæˆ\n- [ ] æŸ¥çœ‹æ—¥å¿—ç¡®è®¤ \"Zoho Mail API\" åˆå§‹åŒ–æˆåŠŸ\n- [ ] æµ‹è¯•é‚®ä»¶å‘é€åŠŸèƒ½\n- [ ] ç¡®è®¤æ”¶åˆ°éªŒè¯é‚®ä»¶\n\n## ğŸ‰ å®Œæˆ!\n\nä½ çš„ ColDAW ç°åœ¨ä½¿ç”¨ Zoho Mail API åœ¨ Railway ä¸Šå‘é€é‚®ä»¶éªŒè¯äº†ã€‚\n\nå¦‚æœ‰é—®é¢˜ï¼Œå‚è€ƒ:\n- å®Œæ•´æŒ‡å—: `/docs/RAILWAY_DEPLOYMENT.md`\n- å¿«é€Ÿéƒ¨ç½²: `/RAILWAY_QUICK_DEPLOY.md`\n- è¿ç§»è¯´æ˜: `/docs/ZOHO_MIGRATION.md`\n"